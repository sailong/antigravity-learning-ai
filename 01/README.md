# ğŸ“ Zero to Expert: Python AI Agent å…¨æ ˆå¤§å¸ˆä¹‹è·¯

æ¬¢è¿æ¥åˆ° **AI Agent å¼€å‘ç»ˆææŒ‡å—**ã€‚æœ¬æ•™ç¨‹ä¸“ä¸ºæœ‰ä¸€å®š Python åŸºç¡€ï¼Œå¸Œæœ›æ·±å…¥æŒæ¡ LLM (å¤§è¯­è¨€æ¨¡å‹)ã€Agent (æ™ºèƒ½ä½“) ä»¥åŠ MCP (Model Context Protocol) åè®®çš„å¼€å‘è€…è®¾è®¡ã€‚

æˆ‘ä»¬çš„ç›®æ ‡ä¸æ˜¯æ•™ä½ å¦‚ä½•â€œèŠå¤©â€ï¼Œè€Œæ˜¯æ•™ä½ å¦‚ä½•**ç¼–ç¨‹**â€”â€”æ„å»ºä¸€ä¸ªèƒ½å¤Ÿè‡ªä¸»æ€è€ƒã€è°ƒç”¨å·¥å…·ã€è¿æ¥çœŸå®ä¸–ç•Œçš„æ™ºèƒ½ç³»ç»Ÿã€‚

---

## ğŸ—ºï¸ è¯¾ç¨‹åœ°å›¾ (Curriculum Map)

æœ¬è¯¾ç¨‹åˆ†ä¸ºå…­ä¸ªé˜¶æ®µï¼Œç”±æµ…å…¥æ·±ï¼Œæœ€ç»ˆå®Œæˆä¸€ä¸ªä¼ä¸šçº§çš„**æ™ºèƒ½ç®€å†ç­›é€‰ç³»ç»Ÿ**ã€‚

| é˜¶æ®µ | ä¸»é¢˜ | æ ¸å¿ƒç›®æ ‡ | å…³é”®è¯ |
| :--- | :--- | :--- | :--- |
| **Phase 1** | **æ–°èŒƒå¼åŸºç¡€** | æŒæ¡ LLM çš„ç¼–ç¨‹æ¥å£ï¼Œå­¦ä¼šç”¨ JSON â€œæ§åˆ¶â€å¤§æ¨¡å‹ã€‚ | OpenAI API, System Prompt, JSON Mode |
| **Phase 2** | **èµ‹äºˆâ€œåŒæ‰‹â€** | ç†è§£ Function Calling (å‡½æ•°è°ƒç”¨) åŸç†ï¼Œè®© AI æ‰§è¡Œæœ¬åœ°ä»£ç ã€‚ | Tools, Schema, Execution |
| **Phase 3** | **MCP åè®®** | å­¦ä¹ æœ€æ–°çš„æ ‡å‡†åŒ–åè®®ï¼Œè§£è€¦â€œå¤§è„‘â€ä¸â€œæ‰‹è„šâ€ã€‚ | MCP, Client/Server, Stdout Transport |
| **Phase 4** | **æ™ºèƒ½å¾ªç¯** | æ„å»º ReAct (Reasoning + Acting) æ€è€ƒå¾ªç¯ï¼Œå®ç°è‡ªä¸»å†³ç­–ã€‚ | Loop, Memory, Self-Correction |
| **Phase 5** | **ç”Ÿäº§çº§å·¥ç¨‹** | å¼•å…¥ç±»å‹æ£€æŸ¥ã€å¼‚æ­¥å¹¶å‘ã€é”™è¯¯é‡è¯•ç­‰å·¥ç¨‹å®è·µã€‚ | Pydantic, Asyncio, Robustness |
| **Phase 6** | **Capstone å®æˆ˜** | ç»¼åˆè¿ç”¨æ‰€æœ‰çŸ¥è¯†ï¼Œä»é›¶æ„å»ºé«˜æ€§èƒ½ç®€å†ç­›é€‰ç³»ç»Ÿã€‚ | Architecture, End-to-End |

---

## ğŸ“… Phase 1: æ–°èŒƒå¼åŸºç¡€ (The New Paradigm)

**ç›®æ ‡**ï¼šä» "Chatgpt ç½‘é¡µå¯¹è¯" æ€ç»´è½¬å˜ä¸º "API ç¼–ç¨‹" æ€ç»´ã€‚

### 1.1 æ ¸å¿ƒæ¦‚å¿µ
*   **System Prompt (äººè®¾)**: å®ƒæ˜¯ä¸Šå¸æŒ‡ä»¤ã€‚æ°¸è¿œä¸è¦æŠŠè¿™ç§æŒ‡ä»¤æ”¾åœ¨ User Prompt é‡Œï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½ä¼šé€šè¿‡ Prompt Injection è¦†ç›–å®ƒã€‚
*   **Structured Output (ç»“æ„åŒ–è¾“å‡º)**: è¿™æ˜¯ç¼–ç¨‹çš„å…³é”®ã€‚LLM æœ¬è´¨æ˜¯æ–‡æœ¬ç”Ÿæˆå™¨ï¼Œä½†æˆ‘ä»¬éœ€è¦å®ƒç”Ÿæˆ **JSON**ï¼Œè¿™æ · Python ä»£ç æ‰èƒ½è§£æã€‚

### 1.2 âš ï¸ å¸¸è§è¯¯åŒº
*   âŒ **é”™è¯¯**: "è¯·å¸®æˆ‘æ€»ç»“ä¸€ä¸‹..." (å¤ªæ¨¡ç³Š)
*   âœ… **æ­£ç¡®**: "è¯·æå–ä»¥ä¸‹å­—æ®µï¼šName, Experienceã€‚ç»“æœå¿…é¡»æ˜¯åˆæ³•çš„ JSON æ ¼å¼ï¼Œä¸è¦åŒ…å« Markdown ä»£ç å—ã€‚"

### 1.3 æ ¸å¿ƒä»£ç æ¨¡å¼
```python
# å¼ºåˆ¶è®© AI "é—­å˜´å¹¶è¾“å‡º JSON"
response = client.chat.completions.create(
    model="qwen3-8b",
    messages=[
        {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ªæ•°æ®æå–å™¨ã€‚åªè¾“å‡º JSONã€‚"},
        {"role": "user", "content": "å³ä½¿æˆ‘é—®ä½ å¤©æ°”ï¼Œä½ ä¹Ÿåªè¿”å› {'weather': 'unknown'}ã€‚"}
    ],
    temperature=0.1 # ğŸ”¥ Pro Tip: è¶Šä½è¶Šå¥½ï¼Œ0.1 é€‚åˆä»£ç ä»»åŠ¡ï¼Œ0.7 é€‚åˆåˆ›ä½œ
)
```

---

## ğŸ“… Phase 2: èµ‹äºˆâ€œåŒæ‰‹â€ (The Agentic Core)

**ç›®æ ‡**ï¼šç†è§£ Agent æ˜¯å¦‚ä½•â€œè°ƒç”¨â€å‡½æ•°çš„ã€‚

### 2.1 åŸç†æ­ç§˜
AI **ä¸èƒ½**ç›´æ¥è¿è¡Œ Python ä»£ç ã€‚å®ƒåªæ˜¯ç”Ÿæˆäº†ä¸€æ®µ**æ–‡æœ¬**ï¼š
> "æˆ‘å»ºè®®è°ƒç”¨å‡½æ•° `get_weather`ï¼Œå‚æ•°æ˜¯ `{'city': 'Beijing'}`"

ä½ éœ€è¦å†™ä»£ç æ¥ï¼š
1.  **æ•è·**è¿™å°±è¯ (è§£æ Tool Call)ã€‚
2.  **æ‰§è¡Œ**æœ¬åœ°çš„ `def get_weather(city): ...`ã€‚
3.  **è¿”å›**ç»“æœç»™ AIã€‚

### 2.2 å®šä¹‰å·¥å…· (Schema)
ä½ éœ€è¦å‘Šè¯‰ AI ä½ æœ‰ä»€ä¹ˆå·¥å…·ã€‚è¿™é€šå¸¸é€šè¿‡ JSON Schema ç§’æ•°ï¼š
```json
{
  "name": "read_file",
  "description": "è¯»å–æ–‡ä»¶å†…å®¹",
  "parameters": {
    "type": "object",
    "properties": {
      "path": {"type": "string"}
    }
  }
}
```

---

## ğŸ“… Phase 3: MCP åè®® (Standardization)

**ç›®æ ‡**ï¼šä½¿ç”¨ Anthropic æ¨å‡ºçš„ MCP åè®®æ ‡å‡†åŒ–å·¥å…·è°ƒç”¨ã€‚ä»¥å‰æˆ‘ä»¬è¦åœ¨ Client é‡Œæ‰‹å†™å·¥å…·å‡½æ•°ï¼Œç°åœ¨æˆ‘ä»¬å°†å®ƒä»¬å‰¥ç¦»åˆ°ç‹¬ç«‹çš„ Server ä¸­ã€‚

### 3.1 ä¸ºä»€ä¹ˆç”¨ MCPï¼Ÿ
*   **è§£è€¦**: Server è´Ÿè´£å¹²æ´» (è¯»æ–‡ä»¶ã€æŸ¥åº“)ï¼ŒClient è´Ÿè´£æ€è€ƒ (LLM)ã€‚
*   **å®‰å…¨**: Server è¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹ï¼Œé€šè¿‡ Stdio é€šä¿¡ï¼Œå¤©ç„¶éš”ç¦»ã€‚
*   **å¤ç”¨**: ä¸€ä¸ª Server å¯ä»¥è¢«å¤šä¸ª Agent å¤ç”¨ã€‚

### 3.2 ğŸ› ï¸ å®æˆ˜ï¼šæ­å»º Resume Server
ä½ åº”è¯¥å·²ç»æœ‰äº† `01/resume_server.py`ã€‚
*   **FastMCP**: ä¸€ä¸ªæç®€è£…é¥°å™¨åº“ï¼ŒæŠŠ Python å‡½æ•°ä¸€é”®å˜æˆ MCP å·¥å…·ã€‚
*   **æ£€æŸ¥ç‚¹**: è¿è¡Œ `npx @modelcontextprotocol/inspector python resume_server.py` å¯åœ¨æµè§ˆå™¨å¯è§†åŒ–è°ƒè¯•ä½ çš„ Serverã€‚

---

## ğŸ“… Phase 4: æ™ºèƒ½å¾ªç¯ (The Intelligent Loop)

**ç›®æ ‡**ï¼šè®© Agent èƒ½å¤Ÿè¿ç»­æ€è€ƒï¼Œè€Œä¸æ˜¯é—®ä¸€ä¸ªé—®é¢˜åŠ¨ä¸€ä¸‹ã€‚

### 4.1 ReAct æ¨¡å¼ (Reason + Act)
è¿™æ˜¯ Agent çš„çµé­‚ï¼š**Observe (è§‚å¯Ÿ) -> Think (æ€è€ƒ) -> Act (è¡ŒåŠ¨)**

ä¸€ä¸ªæ­»å¾ªç¯æ¨¡å‹ï¼š
```python
while True:
    # 1. æ€è€ƒ
    response = llm.call(history)
    
    # 2. åˆ¤æ–­
    if response.has_tool_call():
        # 3. è¡ŒåŠ¨
        result = execute_tool(response.tool_call)
        history.append(result) # æŠŠç»“æœå­˜å…¥è®°å¿†
    else:
        # 4. ç»“æŸ
        return response.content
```

### 4.2 ğŸ”¥ Pro Tip: è‡ªæˆ‘çº é”™ (Self-Correction)
åœ¨ `agent_client2.py` ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†**é²æ£’çš„é‡è¯•æœºåˆ¶**ã€‚
å¦‚æœ LLM è¿”å›äº†é”™è¯¯çš„ JSONï¼Œ**ä¸è¦ç›´æ¥æŠ¥é”™å´©æºƒ**ï¼
*   **æ­£ç¡®åšæ³•**: æŠŠé”™è¯¯ä¿¡æ¯ (`json.JSONDecodeError`) å½“ä½œ User Message å–‚å›ç»™ LLMï¼šâ€œä½ åˆšæ‰æ ¼å¼é”™äº†ï¼Œè¯·ç”±ä¿®æ­£ã€‚â€
*   LLM é€šå¸¸èƒ½åœ¨ç¬¬äºŒæ¬¡å°è¯•ä¸­æ”¹æ­£ã€‚

---

## ğŸ“… Phase 5: ç”Ÿäº§çº§å·¥ç¨‹ (Production Grade)

**ç›®æ ‡**ï¼šä» Demo åˆ° Productionã€‚

### 5.1 å¼‚æ­¥å¹¶å‘ (Asyncio)
ç­›é€‰ 100 ä»½ç®€å†ï¼Œå¦‚æœæ˜¯ä¸²è¡Œ (For Loop)ï¼Œæ¯ä»½ 2ç§’ = 200ç§’ã€‚
ä½¿ç”¨ `asyncio.gather` å¯ä»¥å¹¶å‘å¤„ç†ï¼Œå°†æ—¶é—´å‹ç¼©åˆ° 10ç§’ä»¥å†…ã€‚

### 5.2 ç»“æ„åŒ–éªŒè¯ (Pydantic)
æ‰‹å†™ `json.loads` æ˜¯å±é™©çš„ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œä½¿ç”¨ `Pydantic`ï¼š
```python
from pydantic import BaseModel

class ResumeScore(BaseModel):
    name: str
    score: int
    tags: list[str]

# è‡ªåŠ¨éªŒè¯ + ç±»å‹è½¬æ¢
data = ResumeScore.model_validate_json(llm_response)
```

### 5.3 é”™è¯¯è¾¹ç•Œ (Error Boundary)
*   å¦‚æœè¯»å–æ–‡ä»¶å¤±è´¥ï¼Œä¸è¦è®©æ•´ä¸ª Agent æŒ‚æ‰ã€‚è®©å·¥å…·è¿”å›å­—ç¬¦ä¸² `"Error: File not found"`ï¼Œè®© LLM è‡ªå·±å†³å®šæ€ä¹ˆåŠï¼ˆå®ƒå¯èƒ½ä¼šå°è¯•æ¢ä¸ªæ–‡ä»¶åï¼‰ã€‚

---

## ğŸ“… Phase 6: Capstone é¡¹ç›® - ç»ˆæç®€å†ç­›é€‰å™¨

**ä»»åŠ¡**: ç»¼åˆä»¥ä¸Šæ‰€æœ‰çŸ¥è¯†ï¼Œå®Œå–„ `01/agent_client2.py`ã€‚

### éœ€æ±‚è§„æ ¼
1.  **è‡ªåŠ¨å‘ç°**: è‡ªåŠ¨æ‰«æ `resumes/` ç›®å½•ã€‚
2.  **æ™ºèƒ½ç­›é€‰**: æ ¹æ® Job Description (ä¾‹å¦‚ "å¿…é¡»æ‡‚ Python") è¿›è¡Œè¯„åˆ†ã€‚
3.  **ç»“æœæŒä¹…åŒ–**: å°†ç»“æœä¿å­˜ä¸º `filtered_resumes.json`ã€‚
4.  **é²æ£’æ€§**: å³ä½¿æŸä»½ç®€å†ä¹±ç ï¼Œç¨‹åºä¹Ÿä¸èƒ½å´©ã€‚

### ä½ çš„è¿›é˜¶æŒ‘æˆ˜
*   [ ] **æ”¯æŒ PDF**: é›†æˆ `pdfplumber` åº“ï¼Œæ”¯æŒçœŸå®çš„ PDF ç®€å†è¯»å–ã€‚
*   [ ] **æ”¯æŒ Word**: é›†æˆ `python-docx` (å¤„ç† .docx) æˆ– `antiword` (å¤„ç† .doc)ï¼Œè®©ä½ çš„ Agent èƒ½çœ‹æ‡‚ Word æ–‡æ¡£ã€‚
*   [ ] **å¤šæ­¥æ¨ç†**: å…ˆè¯»æ‰€æœ‰ç®€å†ç”Ÿæˆâ€œå€™é€‰äººåå•â€ï¼Œå†å¯¹ Top 5 è¿›è¡Œâ€œæ·±åº¦åˆ†æâ€ã€‚
*   [ ] **æµå¼è¾“å‡º**: å®ç°æ‰“å­—æœºæ•ˆæœï¼Œè®©ç”¨æˆ·å®æ—¶çœ‹åˆ° Agent çš„æ€è€ƒè¿‡ç¨‹ã€‚

---

## ğŸ“š æ¨èé˜…è¯»ä¸èµ„æº
*   [MCP å®˜æ–¹æ–‡æ¡£](https://modelcontextprotocol.io/)
*   [FastMCP Github](https://github.com/jlowin/fastmcp)
*   [OpenAI Python SDK](https://github.com/openai/openai-python)